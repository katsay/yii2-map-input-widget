function MapInputWidgetManager(){const b=".kolyunya-map-input-widget";var a=this;var c=Array();var e=function(f){if(!$(f).data("initialized")){var g=new MapInputWidget(f);g.initialize();return g}return null};var d=function(g){var f=g.getId();c[f]=g};this.initializeWidgets=function(){$(b).each(function(f,g){var h=e(g);if(h){d(h)}})};this.getWidget=function(f){var g=c[f];return g}}function MapInputWidget(e){const o="input.kolyunya-map-input-widget-input";const b="div.kolyunya-map-input-widget-canvas";var k=this;var i;var l;var c;var r;var p=function(){i=$(e).find(o).get(0);l=$(e).find("#"+$(e).attr("id")+"-search-bar").get(0);c=$(e).find(b).get(0)};var a=function(){r=new google.maps.Map(c,{mapTypeId:$(e).data("map-type"),center:q(),zoom:$(e).data("zoom"),styles:[{featureType:"poi",stylers:[{visibility:"off",},],},],mapTypeControlOptions:{mapTypeIds:[],},});google.maps.event.addListener(r,"click",function(t){k.setPosition({latitude:t.latLng.lat(),longitude:t.latLng.lng(),})})};var g=function(){var t=d();k.setPosition(t);$(e).data("initialized",true)};var s=function(){var t=$(e).data("enable-search-bar");var u=!t;$(l).prop("hidden",u);searchBarAutocomplete=new google.maps.places.Autocomplete(l);r.controls[google.maps.ControlPosition.TOP_RIGHT].push(l);google.maps.event.addDomListener(l,"keydown",function(v){if(v.keyCode==13){v.preventDefault()}});google.maps.event.addListener(searchBarAutocomplete,"place_changed",function(z){var v=this.getPlace();var x=v.geometry;if(x){var y=x.location;k.setPosition(y);if(v.formatted_address){var w=$(e).data("search-bar-input-id");if(w){var A=document.getElementById(w);A.value=v.formatted_address}}}})};var f=function(u){var v=h();var t=m(u);v=v.replace(/%latitude%/g,t.lat());v=v.replace(/%longitude%/g,t.lng());return v};var j=function(){var t=$(i).prop("value")!="";return t};var d=function(){var C;var y=h();var A=$(i).prop("value");if(A!==""){var w=y.indexOf("%latitude%");var z=y.indexOf("%longitude%");var u=w<z;var v=u?0:1;var x=u?1:0;var B=A.match(/-?\d+(\.\d+)?/g)[v];var t=A.match(/-?\d+(\.\d+)?/g)[x];C=new google.maps.LatLng(B,t)}else{C=null}return C};var n=function(){var v=$(e).data("latitude");var u=$(e).data("longitude");var t=new google.maps.LatLng(v,u);return t};var q=function(){var t;if(j()){t=d()}else{t=n()}return t};var h=function(){var t=$(e).data("pattern");return t};var m=function(u){var t;if(u.latitude!==undefined&&u.longitude!==undefined){var w=u.latitude;var v=u.longitude;t=new google.maps.LatLng(w,v)}else{t=u}return t};this.initialize=function(){p();a();g();s()};this.getId=function(){var t=$(e).prop("id");return t};this.setPosition=function(u){if(r.marker){r.marker.setMap(null)}if(u===null){$(i).prop("disabled",true);return}else{$(i).prop("disabled",false)}var t=m(u);if($(e).data("align-map-center")===1){r.panTo(t)}var w=null;if($(e).data("animate-marker")===1){w=google.maps.Animation.DROP}r.marker=new google.maps.Marker({map:r,position:t,draggable:true,animation:w,});google.maps.event.addListener(r.marker,"dragend",function(){k.setPosition(this.getPosition())});var v=$(e).data("pattern");var x=f(t);$(i).prop("value",x)};this.panTo=function(u){var t=m(u);r.panTo(t)};this.setZoom=function(t){r.setZoom(t)}}var mapInputWidgetManager;$(window).load(function(){mapInputWidgetManager=new MapInputWidgetManager();mapInputWidgetManager.initializeWidgets()});